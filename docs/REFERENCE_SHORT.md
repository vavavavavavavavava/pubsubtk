# PubSubTk „É©„Ç§„Éñ„É©„É™ - „É™„Éï„Ç°„É¨„É≥„Çπ„Ç¨„Ç§„Éâ(„Ç∑„Éß„Éº„ÉàÁâà)

## ÁõÆÊ¨°

- [PubSubTk „É©„Ç§„Éñ„É©„É™ - „É™„Éï„Ç°„É¨„É≥„Çπ„Ç¨„Ç§„Éâ(„Ç∑„Éß„Éº„ÉàÁâà)](#pubsubtk-„É©„Ç§„Éñ„É©„É™---„É™„Éï„Ç°„É¨„É≥„Çπ„Ç¨„Ç§„Éâ„Ç∑„Éß„Éº„ÉàÁâà)
  - [ÁõÆÊ¨°](#ÁõÆÊ¨°)
  - [Ê¶ÇË¶Å](#Ê¶ÇË¶Å)
  - [‰∏ª„Å™ÁâπÂæ¥](#‰∏ª„Å™ÁâπÂæ¥)
  - [„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£Ê¶ÇË¶Å](#„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£Ê¶ÇË¶Å)
    - [ÊßãÈÄ†„Ç§„É°„Éº„Ç∏](#ÊßãÈÄ†„Ç§„É°„Éº„Ç∏)
    - [ÂêÑ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÂΩπÂâ≤](#ÂêÑ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÂΩπÂâ≤)
  - [üéØ Êé®Â•®„Ç§„É≥„Éù„Éº„Éà„Éë„Çø„Éº„É≥](#-Êé®Â•®„Ç§„É≥„Éù„Éº„Éà„Éë„Çø„Éº„É≥)
  - [‰∏ªË¶Å„É°„ÇΩ„ÉÉ„Éâ‰∏ÄË¶ß](#‰∏ªË¶Å„É°„ÇΩ„ÉÉ„Éâ‰∏ÄË¶ß)
  - [ÈñãÁô∫„ÅÆ„Éù„Ç§„É≥„Éà](#ÈñãÁô∫„ÅÆ„Éù„Ç§„É≥„Éà)
    - [StateProxy„Å´„Çà„ÇãIDEÈÄ£Êê∫](#stateproxy„Å´„Çà„ÇãideÈÄ£Êê∫)
    - [„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàË®≠Ë®àÊåáÈáù](#„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàË®≠Ë®àÊåáÈáù)
    - [„Ç´„Çπ„Çø„É†„Éà„Éî„ÉÉ„ÇØ„ÉªPubSubÊã°Âºµ](#„Ç´„Çπ„Çø„É†„Éà„Éî„ÉÉ„ÇØpubsubÊã°Âºµ)
    - [„Çà„Åè„ÅÇ„ÇãÂïèÈ°å„Å®Ëß£Ê±∫Ê≥ï](#„Çà„Åè„ÅÇ„ÇãÂïèÈ°å„Å®Ëß£Ê±∫Ê≥ï)
  - [ÂÆüË∑µ‰æã](#ÂÆüË∑µ‰æã)
    - [ÂÖ®Ê©üËÉΩ„ÇíÊ¥ªÁî®„Åó„Åü„Ç∑„É≥„Éó„É´„Å™„Ç´„Ç¶„É≥„Çø„Éº„Ç¢„Éó„É™](#ÂÖ®Ê©üËÉΩ„ÇíÊ¥ªÁî®„Åó„Åü„Ç∑„É≥„Éó„É´„Å™„Ç´„Ç¶„É≥„Çø„Éº„Ç¢„Éó„É™)

## Ê¶ÇË¶Å

PubSubTk „ÅØ„ÄÅPydantic „ÇíÁî®„ÅÑ„ÅüÂûãÂÆâÂÖ®„Å™Áä∂ÊÖãÁÆ°ÁêÜ„Å®„ÄÅPublish-Subscribe „Éë„Çø„Éº„É≥„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶„ÄÅTkinter/ttk „Çí‰Ωø„Å£„Åü GUI „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Çí„Ç∑„É≥„Éó„É´„Å´ÊßãÁØâ„Åß„Åç„Çã Python „É©„Ç§„Éñ„É©„É™„Åß„Åô„ÄÇ

## ‰∏ª„Å™ÁâπÂæ¥

- **UI„Å®„Éì„Ç∏„Éç„Çπ„É≠„Ç∏„ÉÉ„ÇØ„ÅÆÁñéÁµêÂêà** ‚Äï Publish/SubscribeÔºàPub/SubÔºâ„ÅßÈÉ®ÂìÅÈñì„ÇíÈùûÂêåÊúü„É°„ÉÉ„Çª„Éº„Ç∏ÈÄ£Êê∫
- **Pydantic„É¢„Éá„É´** „Å´„Çà„ÇãÂûãÂÆâÂÖ®„Å™Áä∂ÊÖãÁÆ°ÁêÜ„ÄÇ„Éê„É™„Éá„Éº„Ç∑„Éß„É≥„ÇÑ JSON Schema Âá∫Âäõ„ÇÇÁ∞°Âçò
- **Container / Presentational / Processor** 3Â±§ÂàÜÈõ¢„Éë„Çø„Éº„É≥„ÇíÊ®ôÊ∫ñÂåñÔºàReact„Çπ„Çø„Ç§„É´„ÅÆË®≠Ë®à„ÇíTkinter„Åß„ÇÇÔºâ
- **Pub/Sub„Å´„Çà„ÇãÁîªÈù¢ÈÅ∑Áßª„Éª„Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶ÁÆ°ÁêÜ**„Å®**„É™„Ç¢„ÇØ„ÉÜ„Ç£„ÉñUIÊõ¥Êñ∞**„Çí„Çµ„Éù„Éº„Éà
- ‰æùÂ≠ò„ÅØÁ¥îÊ≠£Python„ÅÆ„ÅøÔºà`tkinter`, `pypubsub`, `pydantic`Ôºâ„ÄÇTk„ÉÜ„Éº„ÉûÂ§âÊõ¥Áî®„Å´ `ttkthemes` „ÇÇÂà©Áî®ÂèØËÉΩ

---

## „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£Ê¶ÇË¶Å

### ÊßãÈÄ†„Ç§„É°„Éº„Ç∏

```mermaid
graph LR
  Store[Store]
  Processor[Processor]
  Container[Container]
  View[Presentational View]
  
  Processor -- stateÂ§âÊõ¥Áô∫Ë°å --> Store
  Store -- stateÂ§âÊõ¥ÈÄöÁü• --> Container
  Container -- UIÊõ¥Êñ∞ --> View
  View -- trigger_event --> Container
  Container -- action/„Ç§„Éô„É≥„Éà --> Processor
```

### ÂêÑ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆÂΩπÂâ≤

- **Store**: Pydantic„É¢„Éá„É´„Åß„Ç¢„Éó„É™„ÅÆÁä∂ÊÖã„Çí‰∏ÄÂÖÉÁÆ°ÁêÜ„ÄÇÂûãÂÆâÂÖ®„Å™„Ç¢„ÇØ„Çª„ÇπÔºÜÊõ¥Êñ∞ÈÄöÁü•„ÅåÂæó„Çâ„Çå„Åæ„Åô„ÄÇ
- **Container**: Áä∂ÊÖã„ÇíË≥ºË™≠„Åó„ÄÅUI„Å®ÈÄ£Âãï„ÄÇ„É¶„Éº„Ç∂„ÉºÊìç‰Ωú„Åã„Çâ Processor „Å∏„ÅÆÊ©ãÊ∏°„Åó„ÇÇÊãÖ„ÅÜ„ÄÇ
- **Presentational**: Âèó„ÅëÂèñ„Å£„Åü„Éá„Éº„Çø„ÇíË°®Á§∫„Åô„Çã„Å†„Åë„ÅÆÁ¥îÁ≤ãView„ÄÇÁä∂ÊÖãÁÆ°ÁêÜ„Éª„É≠„Ç∏„ÉÉ„ÇØ„ÅØ‰∏ÄÂàáÊåÅ„Åü„Å™„ÅÑ„ÄÇ
- **Processor**: „Éì„Ç∏„Éç„Çπ„É≠„Ç∏„ÉÉ„ÇØ/Áä∂ÊÖãÂ§âÊõ¥„ÇíÈõÜ‰∏≠ÁÆ°ÁêÜ„ÄÇPubSubÁµåÁî±„ÅßContainer/Store„Å®ÈÄö‰ø°„ÄÇ

---

## üéØ Êé®Â•®„Ç§„É≥„Éù„Éº„Éà„Éë„Çø„Éº„É≥

```python
from pubsubtk import (
    TkApplication, ThemedApplication,           # „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥
    ContainerComponentTk, ContainerComponentTtk, # „Ç≥„É≥„ÉÜ„Éä
    PresentationalComponentTk, PresentationalComponentTtk, # „Éó„É¨„Çº„É≥„ÉÜ„Éº„Ç∑„Éß„É≥
    ProcessorBase,                              # „Éó„É≠„Çª„ÉÉ„Çµ
)
from pydantic import BaseModel
from typing import List, Optional, Dict, Any
import tkinter as tk
from tkinter import ttk
```

---

## ‰∏ªË¶Å„É°„ÇΩ„ÉÉ„Éâ‰∏ÄË¶ß

| „É°„ÇΩ„ÉÉ„Éâ                                      | Ë™¨Êòé„ÉªÁî®ÈÄî                                 | ‰∏ª„Å™Âà©Áî®Â±§                 |
| ----------------------------------------- | ------------------------------------- | --------------------- |
| `pub_switch_container(cls, kwargs)`       | „É°„Ç§„É≥ÁîªÈù¢ÔºàContainerÔºâ„ÇíÂàá„ÇäÊõø„Åà„Çã                | Container / Processor |
| `pub_switch_slot(slot_name, cls, kwargs)` | „ÉÜ„É≥„Éó„É¨„Éº„ÉàÂÜÖ„ÅÆ‰ªªÊÑè„Çπ„É≠„ÉÉ„Éà„ÅÆ„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÇíÂàá„ÇäÊõø„Åà           | Container / Processor |
| `pub_open_subwindow(cls, win_id, kwargs)` | „Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶„ÇíÈñã„Åè                            | Container / Processor |
| `pub_close_subwindow(win_id)`             | ÊåáÂÆö ID „ÅÆ„Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶„ÇíÈñâ„Åò„Çã                    | Container / Processor |
| `pub_close_all_subwindows()`              | „Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶„Çí„Åô„Åπ„Å¶Èñâ„Åò„Çã                        | Container / Processor |
| `pub_replace_state(new_state)`            | Áä∂ÊÖã„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÂÖ®‰Ωì„ÇíÁΩÆ„ÅçÊèõ„Åà„Çã                      | Processor / Container |
| `pub_update_state(state_path, new_value)` | ‰ªªÊÑè„Éë„Çπ„ÅÆÁä∂ÊÖã„ÇíÂûãÂÆâÂÖ®„Å´Êõ¥Êñ∞                        | Processor / Container |
| `pub_add_to_list(state_path, item)`       | „É™„Çπ„ÉàË¶ÅÁ¥†„ÇíÂûãÂÆâÂÖ®„Å´ËøΩÂä†                          | Processor / Container |
| `pub_add_to_dict(state_path, key, value)` | ËæûÊõ∏Ë¶ÅÁ¥†„ÇíÂûãÂÆâÂÖ®„Å´ËøΩÂä†                           | Processor / Container |
| `pub_register_processor(proc, name)`      | Processor „ÇíÂãïÁöÑ„Å´ÁôªÈå≤                      | Processor             |
| `pub_delete_processor(name)`              | Processor „ÇíÂâäÈô§                         | Processor             |
| `sub_state_changed(state_path, handler)`  | ÊåáÂÆö„Éë„Çπ„ÅÆÂÄ§Â§âÊõ¥„ÇíË≥ºË™≠Ôºàold_value, new_valueÂèó‰ø°Ôºâ   | Container             |
| `sub_for_refresh(state_path, handler)`    | Áä∂ÊÖãÊõ¥Êñ∞ÊôÇ„ÅÆUIÂÜçÊèèÁîªÁî®„Ç∑„É≥„Éó„É´ÈÄöÁü•„ÇíË≥ºË™≠ÔºàÂºïÊï∞„Å™„ÅóÔºâ         | Container             |
| `sub_state_added(state_path, handler)`    | „É™„Çπ„Éà„Å∏„ÅÆË¶ÅÁ¥†ËøΩÂä†„ÇíË≥ºË™≠Ôºàitem, indexÂèó‰ø°Ôºâ         | Container             |
| `sub_dict_item_added(state_path, handler)` | ËæûÊõ∏„Å∏„ÅÆË¶ÅÁ¥†ËøΩÂä†„ÇíË≥ºË™≠Ôºàkey, valueÂèó‰ø°Ôºâ            | Container             |
| `register_handler(event, cb)`             | Presentational„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅßView„Ç§„Éô„É≥„Éà„ÅÆ„Éè„É≥„Éâ„É©ÁôªÈå≤ | Container             |
| `trigger_event(event, **kwargs)`          | View‚ÜíContainer„Å∏‰ªªÊÑè„Ç§„Éô„É≥„ÉàÈÄÅÂá∫               | Presentational        |

---

## ÈñãÁô∫„ÅÆ„Éù„Ç§„É≥„Éà

### StateProxy„Å´„Çà„ÇãIDEÈÄ£Êê∫

PubSubTk„ÅÆÊúÄÂ§ß„ÅÆ‰æ°ÂÄ§„ÅØ„ÄÅStateProxy„Å´„Çà„ÇãÂº∑Âäõ„Å™IDEÈÄ£Êê∫„Åß„Åô„ÄÇ

```python
# VSCode/PyCharm„Åß‰ª•‰∏ã„ÅåÂÖ®„Å¶Âäπ„ÅèÔºö
self.store.state.user.name
#            ‚Üë     ‚Üë
#    Ctrl+Click   Ctrl+Click
#    „ÅßÂÆöÁæ©„Å∏     „ÅßÂÆöÁæ©„Å∏

# ‚úÖ F12: ÂÆöÁæ©„Å∏ÁßªÂãï
# ‚úÖ Shift+F12: „Åô„Åπ„Å¶„ÅÆÂèÇÁÖß„ÇíÊ§úÁ¥¢  
# ‚úÖ F2: ÂÆâÂÖ®„Å™„É™„Éç„Éº„É†
# ‚úÖ Ctrl+Space: Ëá™ÂãïË£úÂÆå
```

**str()„ÅåÂøÖË¶Å„Å™„Çø„Ç§„Éü„É≥„Ç∞Ôºö**

```python
# ‚úÖ Âü∫Êú¨ÁöÑ„Å™‰ΩøÁî®Ôºàstr()‰∏çË¶ÅÔºâ
self.pub_update_state(self.store.state.counter, 42)
self.sub_state_changed(self.store.state.todos, self.on_todos_changed)

# ‚úÖ ÊñáÂ≠óÂàóÊìç‰Ωú„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÅÆ„Åøstr()„Çí‰ΩøÁî®
path = str(self.store.state.user.name) + "_backup"
self.pub_update_state(f"todos.{index}", updated_todo)
```

### „Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàË®≠Ë®àÊåáÈáù

**Container** - Áä∂ÊÖã„Å´‰æùÂ≠ò„Åô„ÇãÂá¶ÁêÜ„ÄÅ„É¶„Éº„Ç∂„ÉºÊìç‰Ωú„ÅÆ„Éè„É≥„Éâ„É™„É≥„Ç∞

```python
class TodoContainer(ContainerComponentTk[AppState]):
    def setup_subscriptions(self):
        self.sub_state_changed(self.store.state.todos, self.on_todos_changed)

    def add_todo(self):
        # Áä∂ÊÖãÊõ¥Êñ∞
        self.pub_add_to_list(self.store.state.todos, new_todo)
```

**ÂÇôËÄÉ:** „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÅÆ ``__init__`` „Åß„ÅØ‰∏é„Åà„Çâ„Çå„Åü ``*args`` „Å® ``**kwargs`` „Åå
``self.args`` / ``self.kwargs`` „Å®„Åó„Å¶‰øùÊåÅ„Åï„Çå„Åæ„Åô„ÄÇ„Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶„Çí ``open_subwindow``
„ÅßÈñã„ÅèÂ†¥Âêà„ÅØ ``win_id`` „Åå ``self.kwargs`` „Å´Ëá™ÂãïËøΩÂä†„Åï„Çå„ÄÅ
``pub_close_subwindow(self.kwargs["win_id"])`` „ÅßËá™Ë∫´„ÇíÈñâ„Åò„Çâ„Çå„Åæ„Åô„ÄÇ‰ªäÂæå„ÇÇÂêåÊßò„ÅÆ
„Éá„Éï„Ç©„É´„ÉàÂºïÊï∞„ÅåËøΩÂä†„Åï„Çå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

**Presentational** - Á¥îÁ≤ã„Å™Ë°®Á§∫„ÄÅÂÜçÂà©Áî®ÂèØËÉΩ„Å™ÈÉ®ÂìÅ

```python
class TodoItemView(PresentationalComponentTk):
    def update_data(self, todo_item: TodoItem):
        self.label.config(text=todo_item.text)
    
    def on_click(self):
        # ContainerÂÅ¥„Å´„Ç§„Éô„É≥„ÉàÈÄöÁü•
        self.trigger_event("toggle", todo_id=self.todo_item.id)
```

**Template** - „É¨„Ç§„Ç¢„Ç¶„ÉàÊßãÈÄ†„ÅÆÂÆöÁæ©„ÄÅ„Çπ„É≠„ÉÉ„Éà„Éô„Éº„Çπ„ÅÆÁîªÈù¢ÊßãÊàê

```python
class AppTemplate(TemplateComponentTk[AppState]):
    def define_slots(self):
        # ÂêÑÈ†òÂüü„ÇíÂÆöÁæ©„ÉªÈÖçÁΩÆ
        self.header = tk.Frame(self, height=60)
        self.header.pack(fill=tk.X)
        
        self.main = tk.Frame(self)
        self.main.pack(fill=tk.BOTH, expand=True)
        
        self.sidebar = tk.Frame(self, width=200)
        self.sidebar.pack(side=tk.RIGHT, fill=tk.Y)
        
        return {
            "header": self.header,
            "main": self.main,
            "sidebar": self.sidebar
        }

# ‰ΩøÁî®‰æã
app.set_template(AppTemplate)
app.pub_switch_slot("header", HeaderView)
app.pub_switch_slot("sidebar", NavigationPanel)
```

**Processor** - „Éì„Ç∏„Éç„Çπ„É≠„Ç∏„ÉÉ„ÇØ„ÄÅË§áÈõë„Å™Áä∂ÊÖãÊìç‰Ωú

```python
class TodoProcessor(ProcessorBase[AppState]):
    def setup_subscriptions(self):
        self.subscribe("todo.bulk_update", self.handle_bulk_update)
    
    def handle_bulk_update(self, todo_ids: List[int]):
        # Ë§áÈõë„Å™„É≠„Ç∏„ÉÉ„ÇØÂá¶ÁêÜ
        pass
```

### „Ç´„Çπ„Çø„É†„Éà„Éî„ÉÉ„ÇØ„ÉªPubSubÊã°Âºµ

**AutoNamedTopic„Å´„Çà„Çã„Ç´„Çπ„Çø„É†„Éà„Éî„ÉÉ„ÇØ‰ΩúÊàê**:

```python
from pubsubtk.topic.topics import AutoNamedTopic
from enum import auto

class MyAppTopic(AutoNamedTopic):
    USER_LOGIN = auto()        # -> "MyAppTopic.user_login"
    DATA_LOADED = auto()       # -> "MyAppTopic.data_loaded"
    ERROR_OCCURRED = auto()    # -> "MyAppTopic.error_occurred"
    FILE_EXPORT = auto()       # -> "MyAppTopic.file_export"

# ‰ΩøÁî®‰æã
class MyProcessor(ProcessorBase[AppState]):
    def setup_subscriptions(self):
        self.subscribe(MyAppTopic.USER_LOGIN, self.handle_user_login)
        self.subscribe(MyAppTopic.DATA_LOADED, self.handle_data_loaded)
    
    def some_action(self):
        # „Ç´„Çπ„Çø„É†„Éà„Éî„ÉÉ„ÇØ„Åß„É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°
        self.publish(MyAppTopic.FILE_EXPORT, format="csv", filename="data.csv")
```

**„Éá„Éï„Ç©„É´„Éà„Éà„Éî„ÉÉ„ÇØ vs „Ç´„Çπ„Çø„É†„Éà„Éî„ÉÉ„ÇØ„ÅÆ‰Ωø„ÅÑÂàÜ„Åë**:

```python
# ‚úÖ „Éá„Éï„Ç©„É´„Éà‰æøÂà©„É°„ÇΩ„ÉÉ„Éâ„Çí‰ΩøÁî®ÔºàÊé®Â•®Ôºâ
self.pub_update_state(self.store.state.count, 42)      # Áä∂ÊÖãÊõ¥Êñ∞
self.pub_switch_container(NewContainer)                # ÁîªÈù¢Âàá„ÇäÊõø„Åà
self.pub_open_subwindow(DialogContainer)               # „Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶

# ‚úÖ „Ç´„Çπ„Çø„É†„Éà„Éî„ÉÉ„ÇØ„Çí‰ΩøÁî®Ôºà„Éì„Ç∏„Éç„Çπ„É≠„Ç∏„ÉÉ„ÇØÁâπÊúâ„ÅÆÈÄö‰ø°Ôºâ
self.publish(MyAppTopic.USER_LOGIN, user_id=123)       # „Ç¢„Éó„É™Âõ∫Êúâ„ÅÆ„Ç§„Éô„É≥„Éà
self.subscribe(MyAppTopic.DATA_LOADED, self.on_data)   # Ë§áÈõë„Å™„ÉØ„Éº„ÇØ„Éï„É≠„Éº
```

### „Çà„Åè„ÅÇ„ÇãÂïèÈ°å„Å®Ëß£Ê±∫Ê≥ï

**StateProxy‰ΩøÁî®ÊôÇ„ÅÆ„Ç®„É©„Éº**:

```python
# ‚ùå „Ç®„É©„Éº„Å´„Å™„Çã‰æã
path = self.store.state.user.name.replace("old", "new")  # AttributeError

# ‚úÖ Ê≠£„Åó„ÅÑ‰Ωø„ÅÑÊñπ
path = str(self.store.state.user.name).replace("old", "new")
```

**‰æøÂà©„É°„ÇΩ„ÉÉ„Éâ„ÅÆÊ¥ªÁî®**:

```python
# ‚úÖ Êé®Â•®: ÁµÑ„ÅøËæº„Åø„É°„ÇΩ„ÉÉ„Éâ„Çí‰ΩøÁî®
self.pub_update_state(self.store.state.count, 42)
self.pub_switch_container(OtherContainer)

# ‚ùå ÈùûÊé®Â•®: ÊâãÂãï„Åß„Éà„Éî„ÉÉ„ÇØÊìç‰Ωú
self.publish(DefaultUpdateTopic.UPDATE_STATE, state_path="count", new_value=42)
```

---

## ÂÆüË∑µ‰æã

### ÂÖ®Ê©üËÉΩ„ÇíÊ¥ªÁî®„Åó„Åü„Ç∑„É≥„Éó„É´„Å™„Ç´„Ç¶„É≥„Çø„Éº„Ç¢„Éó„É™

```python
import asyncio
import tkinter as tk
from tkinter import messagebox
from enum import auto

from pydantic import BaseModel

from pubsubtk import (
    ContainerComponentTk,
    PresentationalComponentTk,
    ProcessorBase,
    TemplateComponentTk,
    TkApplication,
)
from pubsubtk.topic.topics import AutoNamedTopic
from pubsubtk.utils import make_async_task

# „Ç´„Çπ„Çø„É†„Éà„Éî„ÉÉ„ÇØÂÆöÁæ©
class AppTopic(AutoNamedTopic):
    INCREMENT = auto()  # -> "AppTopic.increment"
    RESET = auto()  # -> "AppTopic.reset"
    MILESTONE = auto()  # -> "AppTopic.milestone"


class AppState(BaseModel):
    counter: int = 0
    total_clicks: int = 0


# „ÉÜ„É≥„Éó„É¨„Éº„ÉàÂÆöÁæ©
class AppTemplate(TemplateComponentTk[AppState]):
    def define_slots(self):
        self.header = tk.Frame(self, height=50, bg="lightblue")
        self.header.pack(fill=tk.X)

        self.main = tk.Frame(self)
        self.main.pack(fill=tk.BOTH, expand=True)

        return {
            "header": self.header,
            "main": self.main,
        }


# Presentational„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÔºà„Éò„ÉÉ„ÉÄ„ÉºË°®Á§∫Ôºâ
class HeaderView(PresentationalComponentTk):
    def setup_ui(self):
        self.label = tk.Label(
            self, text="PubSubTk Demo", font=("Arial", 16), bg="lightblue"
        )
        self.label.pack(pady=10)

    def update_data(self, total_clicks: int):
        self.label.config(text=f"PubSubTk Demo - Total Clicks: {total_clicks}")


# Container„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÔºà„Éò„ÉÉ„ÉÄ„ÉºÁÆ°ÁêÜÔºâ
class HeaderContainer(ContainerComponentTk[AppState]):
    def setup_ui(self):
        self.header_view = HeaderView(self)
        self.header_view.pack(fill=tk.BOTH, expand=True)

    def setup_subscriptions(self):
        self.sub_for_refresh(str(self.store.state.total_clicks), self.refresh_header)

    def refresh_from_state(self):
        self.refresh_header()

    def refresh_header(self):
        state = self.store.get_current_state()
        self.header_view.update_data(state.total_clicks)


# Container„Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàÔºà„É°„Ç§„É≥„Ç´„Ç¶„É≥„Çø„ÉºÔºâ - async„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£Âà©Áî®
class CounterContainer(ContainerComponentTk[AppState]):
    """„Ç´„Ç¶„É≥„Çø„ÉºË°®Á§∫„Å®„Ç¢„Ç§„ÉÜ„É†ÂâäÈô§„ÇíÁÆ°ÁêÜ„Åô„Çã„Ç≥„É≥„ÉÜ„Éä„ÄÇ"""

    def setup_ui(self):
        self.counter_label = tk.Label(self, text="0", font=("Arial", 32))
        self.counter_label.pack(pady=30)

        self.item_list = tk.Listbox(self, height=5)
        for i in range(5):
            self.item_list.insert(tk.END, f"Item {i+1}")
        self.item_list.pack(pady=10)

        btn_frame = tk.Frame(self)
        btn_frame.pack(pady=20)

        tk.Button(
            btn_frame, text="„Ç´„Ç¶„É≥„Éà„Ç¢„ÉÉ„Éó", command=self.increment, font=("Arial", 12)
        ).pack(side=tk.LEFT, padx=10)
        tk.Button(
            btn_frame, text="„É™„Çª„ÉÉ„Éà", command=self.reset, font=("Arial", 12)
        ).pack(side=tk.LEFT, padx=10)
        tk.Button(
            btn_frame, text="ÂâäÈô§", command=self.delete_selected, font=("Arial", 12)
        ).pack(side=tk.LEFT, padx=10)
        tk.Button(
            btn_frame,
            text="„Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶",
            command=self.open_subwindow,
            font=("Arial", 12),
        ).pack(side=tk.LEFT, padx=10)

    def setup_subscriptions(self):
        self.sub_state_changed(str(self.store.state.counter), self.on_counter_changed_old_way)
        self.subscribe(AppTopic.MILESTONE, self.on_milestone)

    def refresh_from_state(self):
        state = self.store.get_current_state()
        self.counter_label.config(text=str(state.counter))

    def increment(self):
        self.publish(AppTopic.INCREMENT)

    def reset(self):
        self.publish(AppTopic.RESET)

    def open_subwindow(self) -> None:
        self.pub_open_subwindow(SubWindow)

    def delete_selected(self) -> None:
        self.confirm_delete()

    @make_async_task
    async def confirm_delete(self) -> None:
        await asyncio.sleep(0)
        selection = self.item_list.curselection()
        if not selection:
            return
        if messagebox.askyesno("Á¢∫Ë™ç", "ÈÅ∏ÊäûÈ†ÖÁõÆ„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü"):
            self.item_list.delete(selection[0])

    def on_counter_changed_old_way(self, old_value, new_value):
        self.counter_label.config(text=str(new_value))

    def on_milestone(self, value: int):
        messagebox.showinfo("„Éû„Ç§„É´„Çπ„Éà„Éº„É≥!", f"{value} „Å´Âà∞ÈÅî„Åó„Åæ„Åó„ÅüÔºÅ")


# „Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶Áî®„Ç≥„É≥„ÉÜ„Éä
class SubWindow(ContainerComponentTk[AppState]):
    """ÂçòÁ¥î„Å™„Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶„ÄÇ"""

    def setup_ui(self) -> None:
        tk.Label(self, text="„Çµ„Éñ„Ç¶„Ç£„É≥„Éâ„Ç¶„Åß„Åô").pack(padx=20, pady=10)
        tk.Button(self, text="Èñâ„Åò„Çã", command=self.close_window).pack(pady=10)

    def close_window(self) -> None:
        self.pub_close_subwindow(self.kwargs["win_id"])


# ProcessorÔºà„Éì„Ç∏„Éç„Çπ„É≠„Ç∏„ÉÉ„ÇØÔºâ
class CounterProcessor(ProcessorBase[AppState]):
    def setup_subscriptions(self):
        self.subscribe(AppTopic.INCREMENT, self.handle_increment)
        self.subscribe(AppTopic.RESET, self.handle_reset)

    def handle_increment(self):
        state = self.store.get_current_state()
        new_counter = state.counter + 1
        new_total = state.total_clicks + 1

        self.pub_update_state(str(self.store.state.counter), new_counter)
        self.pub_update_state(str(self.store.state.total_clicks), new_total)

        if new_counter % 10 == 0:
            self.publish(AppTopic.MILESTONE, value=new_counter)

    def handle_reset(self):
        self.pub_update_state(str(self.store.state.counter), 0)


if __name__ == "__main__":
    app = TkApplication(AppState, title="PubSubTk Simple Demo", geometry="400x300")
    app.pub_register_processor(CounterProcessor)

    app.set_template(AppTemplate)

    app.pub_switch_slot("header", HeaderContainer)
    app.pub_switch_slot("main", CounterContainer)

    app.run(use_async=True)
```
